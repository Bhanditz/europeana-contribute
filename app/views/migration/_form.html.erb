<% with_options scope: 'site.campaigns.migration.form' do |i18n| %>
  <%= simple_form_for @aggregation, url: { action: 'create' }, builder: Migration::FormBuilder do |agg| %>
    <%= agg.simple_fields_for(:edm_aggregatedCHO) do |cho| %>
      <%= field_set_tag(i18n.t('legends.contributor')) do %>
        <%= cho.simple_fields_for(:dc_contributor) do |contributor| %>
          <%= contributor.input(:foaf_name, required: true) %>
          <%= contributor.input(:skos_prefLabel, required: true) %>
          <%= contributor.input(:foaf_mbox, as: :email, required: true) %>
        <% end %>
        <%= cho.association(:edm_wasPresentAt, label_method: :name) %>
        <%= cho.input(:dc_identifier) %>
      <% end %>
      
      <%= field_set_tag(i18n.t('legends.story')) do %>
        <%= cho.input(:dc_language, as: :select, required: true, collection: EDM::ProvidedCHO.dc_language_enum) %>
        <%= cho.input(:dc_title, required: true) %>
        <%= cho.input(:dc_description, as: :text, required: true, input_html: { rows: 10 }) %>
        <%= cho.input(:dc_subject, input_html: { 'data-url': vocabularies_unesco_path, 'data-param': 'q' }) %>
        <% # Where did the migration begin? %>
        <% # Where did the migration end? %>
        <%= field_set_tag(i18n.t('legends.subject_agent')) do %>
          <%= cho.simple_fields_for(:dc_creator) do |creator| %>
            <%= creator.input(:foaf_name) %>
            <%= creator.input(:rdaGr2_dateOfBirth, as: :date, html5: true) %>
            <%= creator.input(:rdaGr2_placeOfBirth, input_html: { 'data-url': vocabularies_europeana_places_path, 'data-param': 'q' }) %>
            <%= creator.input(:rdaGr2_dateOfDeath, as: :date, html5: true) %>
            <%= creator.input(:rdaGr2_placeOfDeath, input_html: { 'data-url': vocabularies_europeana_places_path, 'data-param': 'q' }) %>
          <% end %>
        <% end %>
      <% end %>
    <% end %>

    <%= field_set_tag(i18n.t('legends.all_objects')) do %>
      <%= field_set_tag(i18n.t('legends.each_object', number: 1)) do %>
        <%= agg.simple_fields_for(:edm_isShownBy) do |wr| %>
          <%= wr.input(:media, label: false) %>
          <%= wr.input(:dc_description) %>
          <%= wr.input(:dc_type) %>
          <%= wr.input(:dcterms_created, as: :date, html5: true) %>
          <%= wr.simple_fields_for(:dc_creator) do |creator| %>
            <%= creator.input(:foaf_name) %>
          <% end %>
        <% end %>
      <% end %>
    <% end %>

    <%= agg.button(:submit) %>
  <% end %>
<% end %>
